# 🏗 Архитектура проекта

## Диаграмма MVC

```
┌─────────────────────────────────────────────────────────────────┐
│                        Telegram Bot                            │
│                         (bot.py)                              │
└─────────────────────┬───────────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────────┐
│                    Controller Layer                            │
│                (controllers/bot_controller.py)                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  • Обработка команд пользователей                       │   │
│  │  • Валидация входных данных                             │   │
│  │  • Координация между Model и View                       │   │
│  │  • Управление сессиями пользователей                    │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────┬───────────────────────────────────────────┘
                      │
        ┌─────────────┼─────────────┐
        │             │             │
        ▼             ▼             ▼
┌─────────────┐ ┌─────────────┐ ┌─────────────┐
│   Model     │ │    View     │ │   Config    │
│   Layer     │ │   Layer     │ │   Layer     │
└─────────────┘ └─────────────┘ └─────────────┘
        │             │             │
        ▼             ▼             ▼
┌─────────────┐ ┌─────────────┐ ┌─────────────┐
│NewsAggregator│ │MessageFormat│ │   Settings  │
│             │ │     ter     │ │             │
│• Сбор новостей│ │             │ │• Конфигурация│
│• Парсинг RSS │ │• Форматирова-│ │• Переменные │
│• Фильтрация  │ │  ние сообщений│ │  окружения  │
│• Определение │ │• Шаблоны     │ │• Валидация  │
│  тем         │ │• Обработка   │ │             │
└─────────────┘ │  ошибок      │ └─────────────┘
                └─────────────┘
        │
        ▼
┌─────────────┐
│UserManager  │
│             │
│• Управление │
│  пользователями│
│• Темы       │
│• Избранное  │
│• Активность │
└─────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────────────┐
│                      Utils Layer                               │
│  ┌─────────────────────┐  ┌─────────────────────────────────┐  │
│  │      Logger         │  │         Scheduler               │  │
│  │                     │  │                                 │  │
│  │• Настройка логирования│  │• Планировщик задач              │  │
│  │• Обработчики файлов │  │• Ежедневные дайджесты           │  │
│  │• Уровни логирования │  │• Периодические обновления       │  │
│  └─────────────────────┘  └─────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────────────┐
│                      Data Layer                                │
│  ┌─────────────────────┐  ┌─────────────────────────────────┐  │
│  │     news.json       │  │         users.json              │  │
│  │                     │  │                                 │  │
│  │• База данных новостей│  │• База данных пользователей      │  │
│  │• RSS-каналы         │  │• Настройки пользователей        │  │
│  │• Метаданные         │  │• Темы и избранное               │  │
│  └─────────────────────┘  └─────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
```

## Поток данных

```
1. Пользователь отправляет команду
   ↓
2. BotController получает команду
   ↓
3. Controller обращается к Model для получения данных
   ↓
4. Model возвращает данные
   ↓
5. Controller передает данные в View для форматирования
   ↓
6. View возвращает отформатированное сообщение
   ↓
7. Controller отправляет сообщение пользователю
```

## Принципы архитектуры

### 🎯 Разделение ответственности
- **Model**: Работа с данными, бизнес-логика
- **View**: Форматирование, представление данных
- **Controller**: Обработка команд, координация

### 🔄 Слабая связанность
- Модули не зависят друг от друга напрямую
- Изменения в одном слое не влияют на другие
- Легкая замена компонентов

### 📈 Масштабируемость
- Легко добавлять новые функции
- Простое тестирование отдельных компонентов
- Возможность горизонтального масштабирования

### 🛠 Поддерживаемость
- Четкая структура кода
- Понятные интерфейсы между слоями
- Централизованная конфигурация

## Преимущества новой архитектуры

1. **Чистый код**: Каждый модуль отвечает за свою область
2. **Тестируемость**: Легко писать unit-тесты для каждого слоя
3. **Расширяемость**: Простое добавление новых функций
4. **Переиспользование**: Компоненты можно использовать в других проектах
5. **Отладка**: Легко найти и исправить ошибки
6. **Командная работа**: Разные разработчики могут работать над разными слоями
